# Release notes\n\n### 2.18.2 (2022-11-22)\n\nThis release corresponds to the\n[AndroidX Media3 1.0.0-beta03 release](https://github.com/androidx/media/releases/tag/1.0.0-beta03).\n\n*   Core library:\n    *   Add `ExoPlayer.isTunnelingEnabled` to check if tunneling is enabled for\n        the currently selected tracks\n        ([#2518](https://github.com/google/ExoPlayer/issues/2518)).\n    *   Add `WrappingMediaSource` to simplify wrapping a single `MediaSource`\n        ([#7279](https://github.com/google/ExoPlayer/issues/7279)).\n    *   Discard back buffer before playback gets stuck due to insufficient\n        available memory.\n    *   Close the Tracing \"doSomeWork\" block when offload is enabled.\n    *   Fix session tracking problem with fast seeks in `PlaybackStatsListener`\n        ([#180](https://github.com/androidx/media/issues/180)).\n    *   Send missing `onMediaItemTransition` callback when calling `seekToNext`\n        or `seekToPrevious` in a single-item playlist\n        ([#10667](https://github.com/google/ExoPlayer/issues/10667)).\n    *   Add `Player.getSurfaceSize` that returns the size of the surface on\n        which the video is rendered.\n    *   Fix bug where removing listeners during the player release can cause an\n        `IllegalStateException`\n        ([#10758](https://github.com/google/ExoPlayer/issues/10758)).\n*   Build:\n    *   Enforce minimum `compileSdkVersion` to avoid compilation errors\n        ([#10684](https://github.com/google/ExoPlayer/issues/10684)).\n*   Track selection:\n    *   Prefer other tracks to Dolby Vision if display does not support it.\n        ([#8944](https://github.com/google/ExoPlayer/issues/8944)).\n*   Downloads:\n    *   Fix potential infinite loop in `ProgressiveDownloader` caused by\n        simultaneous download and playback with the same `PriorityTaskManager`\n        ([#10570](https://github.com/google/ExoPlayer/pull/10570)).\n    *   Make download notification appear immediately\n        ([#183](https://github.com/androidx/media/pull/183)).\n    *   Limit parallel download removals to 1 to avoid excessive thread creation\n        ([#10458](https://github.com/google/ExoPlayer/issues/10458)).\n*   Video:\n    *   Try alternative decoder for Dolby Vision if display does not support it.\n        ([#9794](https://github.com/google/ExoPlayer/issues/9794)).\n*   Audio:\n    *   Use `SingleThreadExecutor` for releasing `AudioTrack` instances to avoid\n        OutOfMemory errors when releasing multiple players at the same time\n        ([#10057](https://github.com/google/ExoPlayer/issues/10057)).\n    *   Adds `AudioOffloadListener.onExperimentalOffloadedPlayback` for the\n        AudioTrack offload state.\n        ([#134](https://github.com/androidx/media/issues/134)).\n    *   Make `AudioTrackBufferSizeProvider` a public interface.\n    *   Add `ExoPlayer.setPreferredAudioDevice` to set the preferred audio\n        output device ([#135](https://github.com/androidx/media/issues/135)).\n    *   Map 8-channel and 12-channel audio to the 7.1 and 7.1.4 channel masks\n        respectively on all Android versions\n        ([#10701](https://github.com/google/ExoPlayer/issues/10701)).\n*   Metadata:\n    *   `MetadataRenderer` can now be configured to render metadata as soon as\n        they are available. Create an instance with\n        `MetadataRenderer(MetadataOutput, Looper, MetadataDecoderFactory,\n        boolean)` to specify whether the renderer will output metadata early or\n        in sync with the player position.\n*   DRM:\n    *   Work around a bug in the Android 13 ClearKey implementation that returns\n        a non-empty but invalid license URL.\n    *   Fix `setMediaDrmSession failed: session not opened` error when switching\n        between DRM schemes in a playlist (e.g. Widevine to ClearKey).\n*   Text:\n    *   CEA-608: Ensure service switch commands on field 2 are handled correctly\n        ([#10666](https://github.com/google/ExoPlayer/issues/10666)).\n*   DASH:\n    *   Parse `EventStream.presentationTimeOffset` from manifests\n        ([#10460](https://github.com/google/ExoPlayer/issues/10460)).\n*   UI:\n    *   Use current overrides of the player as preset in\n        `TrackSelectionDialogBuilder`\n        ([#10429](https://github.com/google/ExoPlayer/issues/10429)).\n*   RTSP:\n    *   Add H263 fragmented packet handling\n        ([#119](https://github.com/androidx/media/pull/119)).\n    *   Add support for MP4A-LATM\n        ([#162](https://github.com/androidx/media/pull/162)).\n*   IMA:\n    *   Add timeout for loading ad information to handle cases where the IMA SDK\n        gets stuck loading an ad\n        ([#10510](https://github.com/google/ExoPlayer/issues/10510)).\n    *   Prevent skipping mid-roll ads when seeking to the end of the content\n        ([#10685](https://github.com/google/ExoPlayer/issues/10685)).\n    *   Correctly calculate window duration for live streams with server-side\n        inserted ads, for example IMA DAI\n        ([#10764](https://github.com/google/ExoPlayer/issues/10764)).\n*   FFmpeg extension:\n    *   Add newly required flags to link FFmpeg libraries with NDK 23.1.7779620\n        and above ([#9933](https://github.com/google/ExoPlayer/issues/9933)).\n*   AV1 extension:\n    *   Update CMake version to avoid incompatibilities with the latest Android\n        Studio releases\n        ([#9933](https://github.com/google/ExoPlayer/issues/9933)).\n*   Cast extension:\n    *   Implement `getDeviceInfo()` to be able to identify `CastPlayer` when\n        controlling playback with a `MediaController`\n        ([#142](https://github.com/androidx/media/issues/142)).\n*   Transformer:\n    *   Add muxer watchdog timer to detect when generating an output sample is\n        too slow.\n*   Remove deprecated symbols:\n    *   Remove `Transformer.Builder.setOutputMimeType(String)`. This feature has\n        been removed. The MIME type will always be MP4 when the default muxer is\n        used.\n